<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TechnoDemocracy ‚Äì Early Manifesto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Hide from search engines for now -->
  <meta name="robots" content="noindex, nofollow, noarchive" />
  <meta name="googlebot" content="noindex, nofollow" />
  <!-- Helps if anything ever accidentally uses http:// -->
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <style>
    :root {
      --bg1: #050816;
      --bg2: #120c2f;
      --accent: #9b5cff;
      --accent-soft: rgba(155, 92, 255, 0.3);
      --text-main: #f9f9ff;
      --text-muted: #c0c2ff;
      --card-bg: rgba(8, 10, 35, 0.9);
      --border-subtle: rgba(255, 255, 255, 0.08);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, var(--bg2), var(--bg1) 55%);
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .shell {
      max-width: 880px;
      width: 100%;
      background: radial-gradient(circle at top left, var(--accent-soft), transparent 55%),
                  linear-gradient(135deg, rgba(10, 12, 40, 0.98), rgba(5, 6, 25, 0.98));
      border-radius: 32px;
      padding: 28px 24px 32px;
      border: 1px solid var(--border-subtle);
      box-shadow:
        0 18px 50px rgba(0, 0, 0, 0.55),
        0 0 0 1px rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(20px);
      position: relative;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 20px;
    }

    .title-group h1 {
      font-size: clamp(1.8rem, 2.4vw + 1rem, 2.6rem);
      letter-spacing: 0.03em;
    }

    .title-group p {
      margin-top: 4px;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .badge {
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      padding: 6px 12px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(6, 8, 30, 0.9);
      color: var(--text-muted);
      white-space: nowrap;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 12px var(--accent);
    }

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: stretch;
      margin-bottom: 18px;
    }

    .counter-card {
      flex: 1 1 230px;
      background: rgba(4, 7, 30, 0.95);
      border-radius: 24px;
      padding: 16px 18px;
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 8px;
      min-height: 152px;
    }

    .counter-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .counter-number {
      font-variant-numeric: tabular-nums;
      font-size: 2.2rem;
      font-weight: 600;
      letter-spacing: 0.04em;
    }

    .counter-caption {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.45;
    }

    .manifesto-card {
      flex: 2 1 300px;
      background: var(--card-bg);
      border-radius: 24px;
      border: 1px solid var(--border-subtle);
      padding: 16px 18px;
      overflow: hidden;
    }

    .manifesto-card h2 {
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .manifesto-lead {
      font-size: 0.95rem;
      line-height: 1.6;
      color: var(--text-main);
    }

    .manifesto-lead strong { color: var(--accent); }

    main {
      margin-top: 10px;
      background: rgba(3, 5, 24, 0.95);
      border-radius: 24px;
      border: 1px solid var(--border-subtle);
      padding: 18px 20px;
      max-height: 380px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--accent-soft) transparent;
    }

    main::-webkit-scrollbar { width: 6px; }
    main::-webkit-scrollbar-track { background: transparent; }
    main::-webkit-scrollbar-thumb {
      background-color: var(--accent-soft);
      border-radius: 999px;
    }

    main h3 {
      font-size: 0.9rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    main p {
      font-size: 0.95rem;
      line-height: 1.7;
      color: var(--text-main);
      margin-bottom: 12px;
    }

    main p:last-child { margin-bottom: 0; }

    .footer-note {
      margin-top: 10px;
      font-size: 0.75rem;
      color: var(--text-muted);
      opacity: 0.9;
    }

    /* ===== Lock overlay ===== */
    body.locked .shell {
      filter: blur(6px);
      transform: scale(0.995);
      pointer-events: none;
      user-select: none;
    }

    .gate {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      background: radial-gradient(circle at top, rgba(18, 12, 47, 0.82), rgba(5, 8, 22, 0.92));
      backdrop-filter: blur(10px);
      z-index: 9999;
    }

    .gate-card {
      width: min(720px, 100%);
      background: radial-gradient(circle at top left, rgba(155, 92, 255, 0.22), transparent 55%),
                  rgba(8, 10, 35, 0.92);
      border: 1px solid var(--border-subtle);
      border-radius: 28px;
      padding: 22px 22px 18px;
      box-shadow: 0 18px 60px rgba(0,0,0,0.6);
    }

    .gate-title {
      font-size: 0.85rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .gate-quote {
      font-size: 1.08rem;
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .gate-quote strong { color: var(--accent); }

    .gate-sub {
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 14px;
      opacity: 0.95;
    }

    .gate-form {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 10px;
    }

    .gate-input {
      flex: 1 1 220px;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(4, 7, 30, 0.95);
      padding: 12px 14px;
      color: var(--text-main);
      outline: none;
      font-size: 0.95rem;
    }

    .gate-input::placeholder { color: rgba(192, 194, 255, 0.7); }

    .gate-btn {
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      background: rgba(6, 8, 30, 0.9);
      color: var(--text-main);
      padding: 12px 16px;
      font-size: 0.95rem;
      cursor: pointer;
      white-space: nowrap;
    }

    .gate-btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
    }

    .gate-msg {
      margin-top: 10px;
      color: var(--text-muted);
      font-size: 0.85rem;
      min-height: 1.2em;
    }

    .gate-foot {
      margin-top: 12px;
      font-size: 0.75rem;
      color: rgba(192, 194, 255, 0.75);
      line-height: 1.5;
    }

    @media (max-width: 640px) {
      .shell { padding: 20px 16px 22px; border-radius: 24px; }
      header { flex-direction: column; align-items: flex-start; }
      .badge { align-self: flex-start; }
      .counter-number { font-size: 1.9rem; }
      main { max-height: none; }
    }
  </style>

  <!-- CounterAPI browser client (handles response parsing) -->
  <script async src="https://cdn.jsdelivr.net/npm/counterapi/dist/counter.browser.min.js"></script>
</head>

<body class="locked">
  <!-- Lock overlay -->
  <div id="gate" class="gate" role="dialog" aria-modal="true" aria-label="Enter password">
    <div class="gate-card">
      <div class="gate-title">Enter the password</div>
      <div class="gate-quote">
        ‚ÄúTruth and <strong>love</strong> must prevail over lies and hatred.‚Äù
        <span style="color: var(--text-muted); font-size: 0.95rem;">‚Äî V√°clav Havel</span>
      </div>
      <div class="gate-sub">
        Symbolic gate: the password is the missing word in the quote.<br>
        <span style="opacity:0.9;">(Pravda a l√°ska mus√≠ zv√≠tƒõzit nad l≈æ√≠ a nen√°vist√≠.)</span>
      </div>

      <form id="gate-form" class="gate-form">
        <input id="gate-password" class="gate-input" type="password" inputmode="text" autocomplete="off"
               placeholder="Password‚Ä¶" aria-label="Password" />
        <button id="gate-btn" class="gate-btn" type="submit">Unlock</button>
      </form>

      <div id="gate-msg" class="gate-msg"></div>

      <div class="gate-foot">
        Note: GitHub Pages can‚Äôt truly protect content (this is symbolic). Each successful unlock claims a Human #.
      </div>
    </div>
  </div>

  <div class="shell">
    <header>
      <div class="title-group">
        <h1>TechnoDemocracy</h1>
        <p>A humble manifesto for a kinder, smarter, more participatory future.</p>
      </div>
      <div class="badge">
        <span class="dot"></span>
        Early universe ¬∑ v0.1
      </div>
    </header>

    <div class="top-row">
      <section class="counter-card" aria-label="Human number">
        <div>
          <div class="counter-label">Your human number</div>
          <div class="counter-number" id="human-counter">‚Ä¶</div>
        </div>
        <p class="counter-caption">
          Claimed on first successful unlock per browser.<br>
          Total humans now: <span id="human-total">‚Ä¶</span>
        </p>
      </section>

      <section class="manifesto-card">
        <h2>Manifesto ¬∑ Snapshot</h2>
        <p class="manifesto-lead">
          <strong>TechnoDemocracy</strong> (working title DDemocracy) is an experiment in
          rebalancing power: combining people, expertise and technology so that
          big decisions are made <em>with</em> citizens instead of merely <em>for</em> them.
          This page is the first public seed of that idea.
        </p>
      </section>
    </div>

    <main aria-label="Manifesto text">
      <h3>Manifesto (preview)</h3>

      <p>
        This is a placeholder for the full manifesto text. For now, TechnoDemocracy
        lives as a simple promise: that large-scale decisions can be made more
        intelligently, more compassionately, and with far greater participation
        than today‚Äôs systems allow.
      </p>

      <p>
        The long-term vision combines:
        citizens chosen by sortition,
        transparent data,
        expert panels,
        and AI systems that are tightly aligned to human values,
        not corporate or party interests.
      </p>

      <p>
        In future iterations, this page will link to:
        the full manifesto, the governance blueprint, and an open library
        of questions, critiques and alternative proposals.
        For now, it is simply a small light on the map saying:
        ‚ÄúThere are better ways to organise ourselves.‚Äù
      </p>

      <p>
        If you are reading this, you are part of the very first wave of humans
        to encounter the idea. Thank you for being here at the beginning.
      </p>
    </main>

    <p class="footer-note">
      v0.1 ¬∑ Static prototype. Human # is assigned on successful unlock using a simple public counter service.
      Future versions can be open source and verifiable.
    </p>
  </div>

  <script>
    (function () {
      const PASSWORD = "LOVE";

      // Storage keys
      const LS_UNLOCKED = "td_unlocked_v1";
      const LS_HUMAN_NO = "td_human_number_v1";

      // CounterAPI settings (v1 public counters)
      const COUNTER_NAMESPACE = "technodemocracy-world";
      const COUNTER_NAME = "humans"; // rename if you want

      const gateEl = document.getElementById("gate");
      const formEl = document.getElementById("gate-form");
      const passEl = document.getElementById("gate-password");
      const btnEl = document.getElementById("gate-btn");
      const msgEl = document.getElementById("gate-msg");

      const yourEl = document.getElementById("human-counter");
      const totalEl = document.getElementById("human-total");

      function format(n) {
        try { return new Intl.NumberFormat("en-GB").format(n); }
        catch { return String(n); }
      }

      function setText(el, text) {
        if (!el) return;
        el.textContent = text;
      }

      function unlockUI() {
        document.body.classList.remove("locked");
        if (gateEl) gateEl.style.display = "none";
      }

      // Set initial display from cache (so it never feels broken)
      const cachedHuman = Number(localStorage.getItem(LS_HUMAN_NO));
      if (Number.isFinite(cachedHuman)) setText(yourEl, format(cachedHuman));
      else setText(yourEl, "‚Ä¶");

      // Helper: create CounterAPI client (browser lib)
      function makeClient() {
        if (typeof Counter !== "function") return null;
        try {
          return new Counter({
            version: "v1",
            namespace: COUNTER_NAMESPACE,
            timeout: 7000,
            debug: false
          });
        } catch {
          return null;
        }
      }

      async function refreshTotal(client) {
        if (!client || !totalEl) return;
        try {
          const res = await client.get(COUNTER_NAME);
          const v = Number(res && res.value);
          setText(totalEl, Number.isFinite(v) ? format(v) : "‚Äî");
        } catch {
          setText(totalEl, "‚Äî");
        }
      }

      // On load: if already unlocked, just unlock and refresh total.
      window.addEventListener("load", async () => {
        const client = makeClient();
        await refreshTotal(client);

        const unlocked = localStorage.getItem(LS_UNLOCKED) === "1";
        const hasNo = Number.isFinite(Number(localStorage.getItem(LS_HUMAN_NO)));

        if (unlocked && hasNo) {
          unlockUI();
          return;
        }

        // Show gate
        if (gateEl) gateEl.style.display = "flex";
        setTimeout(() => passEl && passEl.focus(), 50);

        if (!formEl) return;

        formEl.addEventListener("submit", async (e) => {
          e.preventDefault();

          const pw = (passEl?.value || "").trim().toUpperCase();
          if (pw !== PASSWORD) {
            setText(msgEl, "Not quite. Hint: it‚Äôs the missing word in the quote üôÇ");
            if (passEl) passEl.select();
            return;
          }

          setText(msgEl, "Unlocking‚Ä¶");
          if (btnEl) btnEl.disabled = true;
          if (passEl) passEl.disabled = true;

          // If they already have a number (edge case), don't increment again.
          const existing = Number(localStorage.getItem(LS_HUMAN_NO));
          if (Number.isFinite(existing)) {
            localStorage.setItem(LS_UNLOCKED, "1");
            setText(yourEl, format(existing));
            unlockUI();
            await refreshTotal(client);
            return;
          }

          // Claim a new Human # by incrementing the counter
          try {
            if (!client) throw new Error("Counter client unavailable (CDN blocked?)");

            const res = await client.up(COUNTER_NAME);
            const v = Number(res && res.value);

            if (!Number.isFinite(v)) throw new Error("Bad counter response");

            localStorage.setItem(LS_HUMAN_NO, String(v));
            localStorage.setItem(LS_UNLOCKED, "1");

            setText(yourEl, format(v));
            await refreshTotal(client);

            unlockUI();
          } catch (err) {
            // Still unlock (symbolic gate), but no number available
            localStorage.setItem(LS_UNLOCKED, "1");
            setText(yourEl, "‚Äî");
            setText(totalEl, "‚Äî");
            setText(msgEl, "Unlocked. (Counter is temporarily unavailable.)");
            unlockUI();
          } finally {
            if (btnEl) btnEl.disabled = false;
            if (passEl) passEl.disabled = false;
          }
        });
      });
    })();
  </script>
</body>
</html>
